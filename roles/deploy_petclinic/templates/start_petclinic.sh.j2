#!/usr/bin/env bash

url=$(gcloud secrets versions access "{{version_id}}" --secret="secret-id")
profile=$(gcloud secrets versions access "{{version_id}}" --secret="secret-id")
username=$(gcloud secrets versions access "{{version_id}}" --secret="secret-id")
password=$(gcloud secrets versions access "{{version_id}}" --secret="secret-id")

/usr/bin/java -jar '{{ petclinic_path }}' --spring.profiles.active="$profile" --spring.jpa.hibernate.ddl-auto=update --spring.datasource.url="$url"?useSSL=false --spring.datasource.username="$username" --spring.datasource.password="$password" --spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect


#--spring.profiles.active=mysql --spring.jpa.hibernate.ddl-auto=update --spring.datasource.url=jdbc:mysql://35.194.44.253:3306/petclinic?useSSL=false --spring.datasource.username=petclinic --spring.datasource.password=petpass --spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
